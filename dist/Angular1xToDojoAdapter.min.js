define(["dojo/_base/declare","dijit/_WidgetBase"],function(e,t){return e([t],{$modules:null,scope:null,constructor:function(e,t){var o,i,n,s=/^on(?=.+?)/;for(o=0;o<t.attributes.length;o++)i=t.attributes[o],s.test(i.name)&&(n=i.name.replace(s,"ng-"),e[n]=i.value,t.setAttribute(n,i.value),delete e[i.name],t.removeAttribute(i.name))},postCreate:function(){this.inherited(arguments),angular.module("ngMonkey",[]).provider({$rootElement:function(){this.$get=function(){return angular.element(document)}}});var e=angular.injector(["ng","ngMonkey"].concat(this.$modules));e.invoke(["$compile","$rootScope",function(e,t){var o,i;delete this.params.$modules,delete this.params.template,this.scope=t.$new(),angular.extend(this.scope,this.params);for(o in this.scope)if("data-dojo-props"!==o&&this.domNode.attributes[o])delete this.scope[o];else if(this.scope.hasOwnProperty(o)&&/^[a-z]/i.test(o)){this.domNode.setAttribute(o.split(/(?=[A-Z])/).join("-").toLowerCase(),o);for(i in this.params)this.watch(i,this._onParamsChange);this.scope.$watch(o,this._onScopeChange.bind(this,o))}e(this.domNode)(this.scope,function(e,t){this.domNode.parentNode.replaceChild(e[0],this.domNode),this.domNode=e[0]}.bind(this))}.bind(this)])},destroy:function(){this.inherited(arguments),this.scope=null},_onScopeChange:function(e,t,o){t!==o&&this.set(e,t)},_onParamsChange:function(e,t,o){if(o!==t){this.scope[e]=o;try{this.scope.$digest()}catch(i){console.info(i)}}}})});