define(["dojo/_base/declare","dijit/_WidgetBase"],function(e,t){var n=e([t],{$modules:null,scope:null,constructor:function(e,t){var n,i,o,s=/^on(?=.+?)/;for(n=0;n<t.attributes.length;n++)i=t.attributes[n],s.test(i.name)&&(o=i.name.replace(s,"ng-"),e[o]=i.value,t.setAttribute(o,i.value),delete e[i.name],t.removeAttribute(i.name))},postCreate:function(){this.inherited(arguments);var e=window.angular.injector(["ngMonkey"].concat(this.$modules));e.invoke(["$compile","$rootScope",function(e,t){var n,i,o,s,a,r,h=/{{[^{}]+}}/g,c=/^[a-z$_][a-z$_0-9]*?$/i,l=/[a-z$_][a-z$_0-9]*/gi;delete this.params.$modules,delete this.params.template,this.scope=t.$new(),window.angular.extend(this.scope,this.params);for(i in this.scope)if("data-dojo-props"!==i&&this.domNode.attributes[i])delete this.scope[i];else if(this.scope.hasOwnProperty(i)&&/^[a-z]/i.test(i)){for(o in this.params)if(s=this.params[o])if(a=s.match(h))for(n=0;n<a.length;n++)this.watch(a[n].replace(/[{}]/g,""),this._onParamsChange);else if(c.test(s))this.watch(s,this._onParamsChange);else for(r=s.match(l),n=0;n<r.length;n++)this.watch(r[n],this._onParamsChange);this.scope.$watch(i,this._onScopeChange.bind(this,i))}e(this.domNode)(this.scope)}.bind(this)])},destroy:function(){this.inherited(arguments),this.scope=null},_onScopeChange:function(e,t,n){t!==n&&this.set(e,t)},_onParamsChange:function(e,t,n){if(n!==t){this.scope[e]=n;try{this.scope.$digest()}catch(i){console.info(i)}}}});return window.angular.module("ngMonkey",["ng"]).provider({$rootElement:function(){this.$get=function(){return window.angular.element(document)}}}),n.invoke=function(e,t){t=t?["ng"].concat(t):["ng"];var n=window.angular.injector(t);n.invoke(e)},n});