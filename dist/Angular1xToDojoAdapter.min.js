define(["dojo/_base/declare","dijit/_WidgetBase"],function(e,t){return e([t],{$modules:null,scope:null,constructor:function(e,t){var s,i,o,n=/^on(?=.+?)/;for(s=0;s<t.attributes.length;s++)i=t.attributes[s],n.test(i.name)&&(o=i.name.replace(n,"ng-"),e[o]=i.value,t.setAttribute(o,i.value),delete e[i.name],t.removeAttribute(i.name))},postCreate:function(){this.inherited(arguments);var e=angular.injector(["ng"].concat(this.$modules));e.invoke(["$compile","$rootScope",function(e,t){var s,i;delete this.params.$modules,delete this.params.template,this.scope=t.$new(),angular.extend(this.scope,this.params);for(s in this.scope)if("data-dojo-props"!==s&&this.domNode.attributes[s])delete this.scope[s];else if(this.scope.hasOwnProperty(s)&&/^[a-z]/i.test(s)){this.domNode.setAttribute(s.split(/(?=[A-Z])/).join("-").toLowerCase(),s);for(i in this.params)this.watch(i,this._onParamsChange);this.scope.$watch(s,this._onScopeChange.bind(this,s))}e(this.domNode)(this.scope,function(e,t){this.domNode.parentNode.replaceChild(e[0],this.domNode),this.domNode=e[0]}.bind(this))}.bind(this)])},destroy:function(){this.inherited(arguments),this.scope=null},_onScopeChange:function(e,t,s){t!==s&&this.set(e,t)},_onParamsChange:function(e,t,s){if(s!==t){this.scope[e]=s;try{this.scope.$digest()}catch(i){console.info(i)}}}})});